{# templates/loyalty_landing.html #}
{% extends "base.html" %}

{% block extra_head %}
<style>
  .loy-wrap{
    margin-top:14px;
    display:grid;
    grid-template-columns: 1fr 360px;
    gap:14px;
  }
  @media (max-width: 980px){
    .loy-wrap{ grid-template-columns: 1fr; }
  }

  .rule{
    border:1px solid var(--line);
    border-radius:16px;
    padding:14px;
    background:#fff;
    margin-top:12px;
  }

  .pill{
    display:inline-flex;
    align-items:center;
    gap:8px;
    padding:8px 12px;
    border-radius:999px;
    font-weight:900;
    border:1px solid var(--line);
    background:#fff;
  }

  .big{
    font-size:22px;
    font-weight:900;
    margin-top:10px;
  }

  .mut{
    color:var(--muted);
    font-weight:700;
    margin-top:6px;
  }
</style>
{% endblock %}

{% block content %}
<div class="page-head">
  <div>
    <div class="title">Odmeny</div>
    <p class="subtitle">Jednoduché pravidlá. Žiadne prekvapenia.</p>
  </div>
  <div style="display:flex; gap:10px; flex-wrap:wrap;">
    <a class="btn btn-light" href="{% url 'customer_profile' %}">Späť na profil</a>
    <a class="btn btn-light" href="{% url 'customer_home' %}">Moje biky</a>
  </div>
</div>

<div class="loy-wrap">
  <div class="card">
    <div class="card-pad">
      <div class="pill">Pravidlo</div>
      <div class="big">10 bodov je 1 € zľava</div>
      <div class="mut">Body sa rátajú z dokončených servisov. Zľavu si uplatníš pri najbližšej návšteve.</div>

      <div class="rule">
        <div style="font-weight:900;">Ako zbieraš body</div>
        <div class="small" style="margin-top:6px;">
          Za každé 2 € z ceny dokončeného servisu získaš 1 bod.
        </div>
      </div>

      <div class="rule">
        <div style="font-weight:900;">Ako uplatníš zľavu</div>
        <div class="small" style="margin-top:6px;">
          Každých 10 bodov sa zmení na 1 € zľavu. Zľavu ti servis uplatní pri platení.
        </div>
      </div>

      <div class="rule">
        <div style="font-weight:900;">Prečo to robíme</div>
        <div class="small" style="margin-top:6px;">
          Aby sa oplatilo vracať sa. Servis je dlhodobý vzťah, nie jednorazová návšteva.
        </div>
      </div>
    </div>
  </div>

  <div class="card">
    <div class="card-pad">
      <div style="font-weight:900;">Tvoj stav</div>
      <div class="small" style="margin-top:6px;">{{ profile.full_name|default:profile.email }}</div>

      <div style="margin-top:14px;">
        <div class="pill">Body</div>
        <div class="big">{{ loyalty.loyalty_points }}</div>
      </div>

      <div style="margin-top:14px;">
        <div class="pill">Zľava</div>
        <div class="big">{{ loyalty.loyalty_discount_eur }} €</div>
      </div>

      {% if loyalty.loyalty_points_to_next_eur and loyalty.loyalty_points_to_next_eur > 0 %}
        <div class="small" style="margin-top:12px;">
          Do ďalšieho 1 € zľavy ti chýba {{ loyalty.loyalty_points_to_next_eur }} bodov.
        </div>
      {% else %}
        <div class="small" style="margin-top:12px;">
          Máš pripravenú zľavu na najbližšiu návštevu.
        </div>
      {% endif %}

      <div style="margin-top:14px;">
        <a class="btn btn-orange" href="{% url 'customer_profile' %}">Späť na profil</a>
      </div>
    </div>
  </div>
</div>
{% endblock %}